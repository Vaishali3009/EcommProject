package com.rbs.bdd.util;

import com.rbs.bdd.application.exception.XmlParsingException;
import com.rbs.bdd.generated.ValidateArrangementForPaymentResponse;
import jakarta.xml.bind.JAXBContext;
import jakarta.xml.bind.Unmarshaller;

import java.io.InputStream;

public class XmlUtil {

    //Private Constructor to prevent instantiation
    public XmlUtil() {
        throw  new UnsupportedOperationException("Utility class");
    }

    public static ValidateArrangementForPaymentResponse loadStaticResponse() {
        try {
            JAXBContext context = JAXBContext.newInstance(ValidateArrangementForPaymentResponse.class);
            Unmarshaller unmarshaller = context.createUnmarshaller();
            InputStream is = XmlUtil.class.getClassLoader().getResourceAsStream("static-response/response.xml");
            return (ValidateArrangementForPaymentResponse) unmarshaller.unmarshal(is);
        } catch (Exception e) {
            throw new XmlParsingException("Failed to load static SOAP response", e);
        }
    }
}
